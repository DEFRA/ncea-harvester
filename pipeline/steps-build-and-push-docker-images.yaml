steps:

- task: Docker@2
  displayName: 'Docker Build'
  condition: and(succeeded(), eq(variables.isPullRequest, false))
  inputs:
    command: build
    containerRegistry: $(acrContainerRegistryServiceConnection)
    repository: $(acrContainerRepositoryHarvester)
    tags: '$(imageTag)'

- task: Docker@2
  displayName: 'Docker Push'
  condition: and(succeeded(), eq(variables.isPullRequest, false))
  inputs:
    command: push
    containerRegistry: $(acrContainerRegistryServiceConnection)
    repository: $(acrContainerRepositoryHarvester)
    tags: '$(imageTag)'